{"ast":null,"code":"var _jsxFileName = \"/Users/anitalu/Desktop/web/minesweeper/src/components/Board.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport createBoard from '../util/createBoard';\nimport Cell from './Cell';\nimport Modal from './Modal';\nimport { revealed } from '../util/reveal';\nimport \"../App.css\";\nimport Dashboard from './Dashboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet row = 5;\nlet col = 5;\nlet bomb = 2;\n\nconst Board = () => {\n  _s();\n\n  const [grid, setGrid] = useState([]);\n  const [nonMineCount, setNonMineCount] = useState(0);\n  const [mineLocations, setMineLocation] = useState([]);\n  const [gameOver, setGameOver] = useState(false);\n  const [remainFlagNum, setRemainFlagNum] = useState(0);\n  const [win, setWin] = useState(false);\n  useEffect(() => {\n    // Calling the function\n    freshBoard();\n  }, []); // Creating a board\n\n  const freshBoard = () => {\n    const newBoard = createBoard(row, col, bomb);\n    setNonMineCount(row * col - bomb);\n    setRemainFlagNum(bomb);\n    setMineLocation(newBoard.mineLocation);\n    setGrid(newBoard.board);\n  };\n\n  const restartGame = () => {\n    freshBoard();\n    setGameOver(false);\n    setWin(false);\n  }; // On Right Click / Flag Cell\n\n\n  const updateFlag = (e, x, y) => {\n    // To not have a dropdown on right click\n    e.preventDefault(); // Deep copy of a state\n\n    let newGrid = JSON.parse(JSON.stringify(grid));\n    let newFlagNum = remainFlagNum;\n\n    if (newGrid[x][y].flagged !== true && newGrid[x][y].revealed !== true) {\n      console.log(\"flagged\"); // newGrid[x][y].revealed = true;\n\n      newGrid[x][y].flagged = true;\n      newFlagNum--;\n    } else {\n      console.log(\"unflagged\"); // newGrid[x][y].revealed = false;\n\n      newGrid[x][y].flagged = false;\n      newFlagNum++;\n    }\n\n    setRemainFlagNum(newFlagNum);\n    setGrid(newGrid);\n    console.log(\"rightclick\", grid[0][0].revealed, grid[0][0].flagged);\n    console.log(\"check win? \", checkWin());\n  }; // Reveal Cell\n\n\n  const revealCell = (x, y) => {\n    if (grid[x][y].revealed || gameOver) {\n      return;\n    }\n\n    let newGrid = JSON.parse(JSON.stringify(grid));\n\n    if (newGrid[x][y].value === 'ðŸ’£') {\n      for (let i = 0; i < mineLocations.length; i++) {\n        newGrid[mineLocations[i][0]][mineLocations[i][1]].revealed = true;\n      }\n\n      setGrid(newGrid);\n      setGameOver(true);\n    } else {\n      let newRevealedBoard = revealed(newGrid, x, y, nonMineCount);\n      setGrid(newRevealedBoard.arr);\n      setNonMineCount(newRevealedBoard.newNonMinesCount);\n\n      if (newRevealedBoard.newNonMinesCount === 0) {\n        setGameOver(true);\n      }\n    }\n\n    console.log(\"check win? \", checkWin());\n  };\n\n  const checkWin = () => {\n    if (remainFlagNum != 0) return false;\n    let winGame = true;\n\n    for (let x = 0; x < row; x++) {\n      for (let y = 0; y < col; y++) {\n        let tmp = grid[x][y].revealed && grid[x][y].value !== 'ðŸ’£' || !grid[x][y].revealed && grid[x][y].value === 'ðŸ’£';\n        winGame = winGame && tmp;\n      }\n    }\n\n    return winGame;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"boardWrapper\",\n    style: {\n      width: 400\n    },\n    children: [/*#__PURE__*/_jsxDEV(Dashboard, {\n      remainFlagNum: remainFlagNum,\n      gameOver: gameOver\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board\",\n      children: [gameOver && /*#__PURE__*/_jsxDEV(Modal, {\n        restartGame: restartGame\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 30\n      }, this), grid.map((singleRow, index1) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\"\n          },\n          children: singleRow.map((singleBlock, index2) => {\n            return /*#__PURE__*/_jsxDEV(Cell, {\n              detail: singleBlock,\n              updateFlag: updateFlag,\n              revealCell: revealCell\n            }, index2, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 41\n            }, this);\n          })\n        }, index1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 29\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Board, \"H8T9RFHlQnspyv6b5WwQ7VPsGYg=\");\n\n_c = Board;\nexport default Board;\n\nvar _c;\n\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"sources":["/Users/anitalu/Desktop/web/minesweeper/src/components/Board.js"],"names":["React","useEffect","useState","createBoard","Cell","Modal","revealed","Dashboard","row","col","bomb","Board","grid","setGrid","nonMineCount","setNonMineCount","mineLocations","setMineLocation","gameOver","setGameOver","remainFlagNum","setRemainFlagNum","win","setWin","freshBoard","newBoard","mineLocation","board","restartGame","updateFlag","e","x","y","preventDefault","newGrid","JSON","parse","stringify","newFlagNum","flagged","console","log","checkWin","revealCell","value","i","length","newRevealedBoard","arr","newNonMinesCount","winGame","tmp","width","map","singleRow","index1","display","singleBlock","index2"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport createBoard from '../util/createBoard';\nimport Cell from './Cell';\nimport Modal from './Modal';\nimport { revealed } from '../util/reveal';\nimport \"../App.css\"\nimport Dashboard from './Dashboard';\nlet row = 5;\nlet col = 5;\nlet bomb = 2;\n\nconst Board = () => {\n    const [grid, setGrid] = useState([]);\n    const [nonMineCount, setNonMineCount] = useState(0);\n    const [mineLocations, setMineLocation] = useState([]);\n    const [gameOver, setGameOver] = useState(false);\n    const [remainFlagNum, setRemainFlagNum] = useState(0);\n    const [win, setWin] = useState(false);\n\n    useEffect(() => {\n        // Calling the function\n        freshBoard();\n    }, []);\n\n    // Creating a board\n    const freshBoard = () => {\n        const newBoard = createBoard(row, col, bomb);\n        setNonMineCount(row* col - bomb);\n        setRemainFlagNum(bomb);\n        setMineLocation(newBoard.mineLocation);\n        setGrid(newBoard.board);\n    }\n\n    const restartGame = () => {\n        freshBoard();\n        setGameOver(false);\n        setWin(false);\n    }\n\n    // On Right Click / Flag Cell\n    const updateFlag = (e, x, y) => {\n        // To not have a dropdown on right click\n        e.preventDefault();\n        // Deep copy of a state\n        let newGrid = JSON.parse(JSON.stringify(grid));\n        let newFlagNum = remainFlagNum;\n        if(newGrid[x][y].flagged !== true &&  newGrid[x][y].revealed !== true){\n            console.log(\"flagged\")\n            // newGrid[x][y].revealed = true;\n            newGrid[x][y].flagged = true;\n            newFlagNum--;\n        }\n        else{\n            console.log(\"unflagged\")\n            // newGrid[x][y].revealed = false;\n            newGrid[x][y].flagged = false;\n            newFlagNum++;\n        }\n        setRemainFlagNum(newFlagNum);\n        setGrid(newGrid);\n        console.log(\"rightclick\", grid[0][0].revealed, grid[0][0].flagged)\n        console.log(\"check win? \", checkWin());\n    };\n\n    // Reveal Cell\n    const revealCell = (x, y) => {\n        if(grid[x][y].revealed || gameOver){\n            return;\n        }\n        let newGrid = JSON.parse(JSON.stringify(grid));\n        if(newGrid[x][y].value === 'ðŸ’£'){\n            for(let i = 0; i < mineLocations.length; i++){\n                newGrid[mineLocations[i][0]][mineLocations[i][1]].revealed = true;\n            }\n            setGrid(newGrid);\n            setGameOver(true);\n        } \n        else{\n            let newRevealedBoard = revealed(newGrid, x, y, nonMineCount);\n            setGrid(newRevealedBoard.arr);\n            setNonMineCount(newRevealedBoard.newNonMinesCount);\n            if(newRevealedBoard.newNonMinesCount === 0){\n                setGameOver(true);\n            }\n        }\n        console.log(\"check win? \",checkWin());\n    }\n\n    const checkWin = () => {\n        if(remainFlagNum != 0) return false;\n        let winGame = true;\n        for(let x = 0; x < row; x++){\n            for(let y = 0 ; y < col; y++){\n                let tmp = (grid[x][y].revealed && grid[x][y].value !== 'ðŸ’£') || (!grid[x][y].revealed && grid[x][y].value === 'ðŸ’£');\n                winGame = winGame && tmp;\n            }\n        }\n        return winGame;\n    }\n\n    return(\n        <div className='boardWrapper' style = {{width : 400}}>\n            <Dashboard remainFlagNum = {remainFlagNum} gameOver = {gameOver}/>\n            <div className=\"board\">\n                {gameOver && <Modal restartGame = {restartGame}/>}\n                {\n                    grid.map((singleRow, index1) => {\n                        return (\n                            <div style = {{display: \"flex\"}} key = {index1}>\n                                {singleRow.map((singleBlock, index2) => {\n                                    return (\n                                        <Cell detail = {singleBlock} updateFlag = {updateFlag} revealCell = {revealCell} key = {index2}/>\n                                    );\n                                })}\n                            </div>\n                        );\n                    })\n                }\n            </div>\n            \n        </div>\n    ); \n\n    \n\n}\n\nexport default Board"]},"metadata":{},"sourceType":"module"}